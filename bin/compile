#!/bin/sh

set -e

BUILD_DIR=$1
CACHE_DIR=$2

echo "-------> Downloading forge"

# Config
URL=https://foundry.paradigm.xyz

# Download
mkdir -p $CACHE_DIR
if ! [ -e $CACHE_DIR/forge ]; then
    echo "-----> Downloading whois Debian package from ${URL} to ${CACHE_DIR}/forge.deb"
    curl -s -L -o $CACHE_DIR/forge.deb $URL 2>&1
fi

#curl -L https://foundry.paradigm.xyz | bash



echo "-------> Done installing forge"



## Install
#echo "-----> Installing whois package to ${BUILD_DIR}/vendor/whois/usr/bin/whois"
mkdir -p $BUILD_DIR/vendor/forge
dpkg -x $CACHE_DIR/forge.deb $BUILD_DIR/vendor/forge

foundryup

#echo "export PATH=\$HOME/vendor/forge/usr/bin:\$PATH" >> $BUILD_DIR/.profile.d/whois_buildpack_paths.sh
